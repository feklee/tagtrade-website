<!DOCTYPE html 
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>TagTrade Wiki | PmWiki / ConditionalMarkup browse</title>
  <meta http-equiv="Content-type" content="text/html;charset=iso-8859-1" />
  <meta http-equiv='Content-Style-Type' content='text/css' />
  <link rel='stylesheet' href='/pmwiki/pub/skins/tagtrade/tagtrade.css' type='text/css' />
  <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  .editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style>  <meta name='robots' content='noindex,nofollow' />

</head>
<body>
<!--PageHeaderFmt-->
  <div id='wikilogo'><a href=''><img src='/pmwiki/pub/skins/tagtrade/tagtrade-32.gif'
    alt='TagTrade Wiki' border='0' /></a></div>
  <div id='wikihead'>
  </div>
<!--/PageHeaderFmt-->
  <table id='wikimid' width='100%' cellspacing='0' cellpadding='0'><tr>
<!--PageLeftFmt-->
      <td id='wikileft' valign='top'>
        <p class='sidehead'> <a class='wikilink' href='/Main/HomePage'>Main</a>
</p><ul><li><a class='wikilink' href='/Main/Systems'>Systems</a>
</li><li><a class='wikilink' href='/Main/DiscussionGroups'>Discussion groups</a>
</li><li><a class='wikilink' href='/Main/Jabber'>Jabber group chat</a>
</li><li><a class='wikilink' href='/Main/Irc'>IRC channel</a>
</li><li><a class='wikilink' href='/Main/Events'>Events</a>
</li><li><a class='wikilink' href='/Main/TODO'>To do</a>
</li><li><a class='wikilink' href='/Main/WikiSandbox'>Wiki sandbox</a>
</li></ul><p class='vspace sidehead'> <a class='wikilink' href='/Devel/HomePage'>Devel</a>
</p><ul><li><a class='wikilink' href='/Devel/TODO'>To do</a>
</li><li><a class='wikilink' href='/Devel/BackEnd'>Back end</a>
</li><li><a class='wikilink' href='/Devel/FrontEnd'>Front end</a>
</li><li><a class='wikilink' href='/Devel/AuthoringPages'>Authoring pages</a>
</li></ul><p class='vspace sidehead'> <a class='wikilink' href='/Profiles/HomePage'>Profiles</a>
</p>
<p class='vspace sidehead'> <a class='wikilink' href='/PmWiki/PmWiki'>PmWiki</a>
</p>
<p class='vspace sidehead'> <a class='wikilink' href='/DocArchive/HomePage'>Doc archive</a>
</p>
<p class='vspace sidehead'> <a class='wikilink' href='/Portal/HomePage'>Portal</a>
</p><ul><li><a class='wikilink' href='/Portal/WikiSandbox'>Wiki sandbox</a>
</li></ul>
</td>
<!--/PageLeftFmt-->
      <td id='wikibody' valign='top'>
<!--PageTitleFmt-->
        <div id='wikititle'>
          <div class='pagegroup'><a href='/PmWiki'>PmWiki</a> /</div>
          <h1 class='pagetitle'>ConditionalMarkup</h1></div>
<!--PageText-->
<div id='wikitext'>
<p>
<a name='trailstart' id='trailstart'></a> 
</p><div style="clear:right; float:right; font-size:smaller; background-color:#eee;" >
<p><span class='wikitrail'>&lt; <a class='wikilink' href='/PmWiki/InterMap'>InterMap</a> | <a class='wikilink' href='/PmWiki/DocumentationIndex#trailstart#trailend'>Documentation Index</a> | <a class='wikilink' href='/PmWiki/PageVariables'>Page variables</a> &gt;</span> 
</p></div>
<div style="clear:right;" ><span class='frame rfloat' style='font-size: smaller; background-color: #ffffcc;'>authors, admins (advanced) </span>
</div>
<h2>Using the (:if:) Directive</h2>
<p>The <code class='escaped'>(:if:)</code> directive allows portions of a page to be included or 
excluded from rendering.  The generic forms of the <code class='escaped'>(:if:)</code> directive are
</p>
<div class='vspace'></div><div class='indent'><code class='escaped'>(:if cond param:) body (:ifend:)</code>
</div><div class='indent'><code class='escaped'>(:if cond param:) body (:else:) body (:ifend:)</code>
</div><div class='indent'><code class='escaped'>(:if cond param:) body (:elseif cond param:) body (:ifend:)</code> <sup>see <a class='wikilink' href='/PmWiki/ReleaseNotes#elseifelse'>[1]</a> <a class='wikilink' href='/PmWiki/ChangeLog#beta32'>[2]</a></sup>
</div><p class='vspace'>where "cond" names a <a href='#built-in-conditions'>condition to be tested</a>, and "param" is a parameter or other argument to the condition.
</p>
<div class='vspace'></div><h2>Markup Shortcut</h2>
<p>You can also use an abbreviated form of <code class='escaped'>(:ifend:)</code>, <code class='escaped'>(:if:)</code> for brevity:
</p><div class='indent'><code class='escaped'>(:if cond1:) cond1 is true (:if:)</code>
</div><div class='indent'><code class='escaped'>(:if cond1:) cond1 is true (:if cond2:) cond2 is true (:if:)</code>
</div><p>The latter is identical to :
</p><div class='indent'><code class='escaped'>(:if cond1:) cond1 is true (:ifend:)(:if cond2:) cond2 is true (:ifend:)</code>
</div><div class='vspace'></div><h2>Built-in Conditions <a name='built-in-conditions' id='built-in-conditions'></a></h2>
<p>The built-in conditions include:
</p>
<div class='vspace'></div>
<table class='indent' border='0' cellpadding='0' cellspacing='0' valign='top' ><tr><td  valign='top'><code class='escaped'>(:if name PAGENAME:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>current page is named "<code class='escaped'>PAGENAME</code>"
</td></tr><tr><td  valign='top'><code class='escaped'>(:if group GROUPNAME:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>current group is named "<code class='escaped'>GROUPNAME</code>"
</td></tr><tr><td  valign='top'><code class='escaped'>(:if auth LEVEL PAGENAME:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>viewer is authorized - meaning "what they are allowed to do" - matches a "<code class='escaped'>LEVEL</code>" where <code class='escaped'>LEVEL</code> can be: <code class='escaped'>read</code>, <code class='escaped'>edit</code>, <code class='escaped'>upload</code>, <code class='escaped'>attr</code> or <code class='escaped'>admin</code>; <code class='escaped'>PAGENAME</code> is optional.
</td></tr><tr><td  valign='top'><code class='escaped'>(:if authid:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>current viewer is authenticated - meaning they have proven who they are via login - to use this the wiki must include recipe <a class='wikilink' href='/PmWiki/AuthUser'>AuthUser</a> or others which set the <code class='escaped'>$AuthId</code> variable.
</td></tr><tr><td  valign='top'><code class='escaped'>(:if enabled InvalidLogin:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>username and password not authenticated. To use this the wiki must include recipe AuthUser.
</td></tr><tr><td  valign='top'><code class='escaped'>(:if true:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>always include text
</td></tr><tr><td  valign='top'><code class='escaped'>(:if false:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>always exclude text (same as a comment)
</td></tr><tr><td  valign='top'><code class='escaped'>(:if attachments:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>current page has one or more attachments
<p>If used in a sidebar, header, or footer the condition applies to the main page.
</p></td></tr><tr><td  valign='top'><code class='escaped'>(:if date DATE VALUE:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'><code class='escaped'>DATE</code> may be year-month.  year-month-day is optional.  
<p>Evaluates to true if <code class='escaped'>VALUE</code> is within <code class='escaped'>DATE</code> ("now" or "today" is assumed if VALUE is omitted, as in the following examples.)  (Note that <code class='escaped'>VALUE</code> can be a recognizable date via strtotime() whereas DATE [or DATE1 and DATE2 below] have a more fixed format which explicitly must exclude spaces.  Any spaces in DATE1 or DATE2 cause unpredictable results.)
</p></td></tr><tr><td  valign='top'><code class='escaped'>(:if date DATE.. VALUE:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>true if <code class='escaped'>VALUE</code> (or current date if omitted) is <code class='escaped'>DATE</code> or later (unlimited)
</td></tr><tr><td  valign='top'><code class='escaped'>(:if date ..DATE VALUE:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>true if <code class='escaped'>VALUE</code> (or current date if omitted) is <code class='escaped'>DATE</code> or earlier (unlimited)
</td></tr><tr><td  valign='top'><code class='escaped'>(:if date DATE1..DATE2 VALUE:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>true if <code class='escaped'>VALUE</code> (or current date if omitted) is in range <code class='escaped'>DATE1</code> to <code class='escaped'>DATE2</code> (inclusive) 
<p><span  style='color: green;'><span style='font-size:83%'><em>dates are in <a style='color: green' target='_blank'  class='urllink' href='http://w3.org/QA/Tips/iso-date' rel='nofollow'>standard</a> format yyyy-mm-dd or yyyymmdd or yyyymmddThhmm (note the "T" between the date and the hour, and also see comment above on format of VALUE).</span></em></span>
<br clear='all' /><span style='font-size:83%'>Note the ".." cannot have leading or trailing spaces.</span>
</p></td></tr><tr><td  valign='top'><code class='escaped'>(:if enabled VAR:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>true if PHP VAR is true
</td></tr><tr><td  valign='top'><code class='escaped'>(:if enabled AuthPw:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>true if user has entered any password during the current browser session.
<p>- This does not mean the user has entered the correct password, just that they entered one.
</p></td></tr><tr><td  valign='top'><code class='escaped'>(:if equal STRING1 STRING2:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>true if <code class='escaped'>STRING1</code> equals <code class='escaped'>STRING2</code>, use quotes if the string or string variable contains spaces, eg <code class='escaped'>"MY STRING"</code>
</td></tr><tr><td  valign='top'><code class='escaped'>(:if match REG_EXPRESSION:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>true if current page name matches the regular expression
</td></tr><tr><td  valign='top'><code class='escaped'>(:if exists PAGENAME:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>true if the page <em>pagename</em> exists
</td></tr><tr><td  valign='top'><code class='escaped'>(:if action ACTION:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>true if the action ?action=ACTION (edit, print, ...) is currently permitted. To test what the current action being requested is, use <code class='escaped'>(:if equal {$Action} ACTION:)</code>.
</td></tr><tr><td  valign='top'><code class='escaped'>(:if ontrail WikiTrailPage ThisPage:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>true if ThisPage is in a list used as a <a class='wikilink' href='/PmWiki/WikiTrails'>trail</a> on WikiTrailPage
</td></tr></table>
<p class='vspace'>The name and group conditionals will work even for an included page, as the "name" and "group" conditionals always check the currently displayed page, as opposed to the page that the markup appears in.
</p>
<div class='vspace'></div><h2>Negated Conditions</h2>
<p>Negated forms of conditions also work:
</p>
<div class='vspace'></div>
<table class='indent' border='0' cellpadding='0' cellspacing='0' valign='top' ><tr><td  valign='top'><code class='escaped'>(:if !attachments:)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>this page has no attachments
</td></tr><tr><td colspan='3'  valign='top'>&nbsp;
</td></tr><tr><td  valign='top'><code class='escaped'>(:if ! name PAGENAME:)</code>
</td><td rowspan='3'  valign='top'>
</td><td rowspan='3' valign='middle' >current page is NOT named "<code class='escaped'>PAGENAME</code>"
</td></tr><tr><td  valign='top'><code class='escaped'>(:if name -PAGENAME :)</code>
</td><td  valign='top'>
</td></tr><tr><td  valign='top'><code class='escaped'>(:if name !PAGENAME :)</code>
</td></tr></table>
<div class='vspace'></div><h2>Nesting Conditions <a name='nested-conditions' id='nested-conditions'></a></h2>
<p>Conditions may be nested (from 2.2.beta 66).
</p>
<p class='vspace'>Nested <code class='escaped'>(:if:)</code> works the same way as nested <code class='escaped'>(:div:)</code>. To have nested conditionals you need to number the if, and the matching else/ifend:
</p><div class='indent'><pre class='escaped'>
(:if cond1:)
  cond1 is true
  (:if2 cond2:)
     cond1 and cond2 are true
  (:else2:)
     cond1 is true, cond2 is not
  (:if2end:)
(:else:)
  cond1 is false, cond2 testing was skipped
(:ifend:)
</pre>
</div><p><span style='font-size:83%'><em>Spaces were added for better readability.</em></span>
</p>
<div class='vspace'></div><h2>Using wildcard placeholders</h2>
<p>The character <code class='escaped'>*</code> can be used as a wildcard to represent any character, zero, one, or multiple times.<br />The character <code class='escaped'>?</code> can be used as a wildcard to represent any character exactly once.<br />Wildcard characters (<code class='escaped'>*</code> and <code class='escaped'>?</code>) can be used with the <em>name</em> and <em>group</em> conditional markups, thus:
</p>
<div class='vspace'></div>
<table class='indent' border='0' cellpadding='0' cellspacing='0' valign='top' ><tr><td  valign='top'><code class='escaped'>(:if name PmCal.2005* :)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>current page is in group PmCal and begins with 2005
</td></tr><tr><td  valign='top'><code class='escaped'>(:if group PmWiki* :)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>current page is in group PmWiki or a group beginning with PmWiki
</td></tr><tr><td  valign='top'><code class='escaped'>(:if name Profiles.*,-Profiles.Profiles :)</code>
</td><td  valign='top'>&nbsp;-&nbsp;
</td><td  valign='top'>current page is in group <code class='escaped'>Profiles</code> but not <code class='escaped'>Profiles.Profiles</code>
</td></tr></table>
<div class='vspace'></div><h2>Using <a class='wikilink' href='/PmWiki/PageTextVariables'>page text variables</a>, <a class='wikilink' href='/PmWiki/PageVariables'>page variables</a> and <a class='wikilink' href='/PmWiki/MarkupExpressions'>markup expressions</a></h2>
<p>Page text variables (PTVs), page variables (PVs) and markup expressions can be used in conditional markup. They will be assigned/evaluated before the condition(s). 
</p>
<div class='vspace'></div><h2>Use with <a class='wikilink' href='/PmWiki/PageListTemplates'>page list templates</a></h2>
<p>Conditional markup is used extensively with <a class='wikilink' href='/Site/PageListTemplates'>page list templates</a>.
</p>
<p class='vspace'>Use with page variables:
</p><div class='indent'>=   current item
</div><div class='indent'>&lt;   previous item
</div><div class='indent'>&gt;   next item
</div><p class='vspace'>Conditionals used to structure pagelist output:
</p><pre>  <code class='escaped'>(:if equal {&lt;$Group}:)</code> deprecated in favour of <code class='escaped'>(:template first:)</code> At beginning of list
  <code class='escaped'>(:if equal {&gt;$Group}:)</code> deprecated in favour of <code class='escaped'>(:template last:)</code> At end of list
  <code class='escaped'>(:if ! equal {=$Group} {&lt;$Group}:)</code> deprecated in favour of <code class='escaped'>(:template first {=$Group}:)</code> First item in group
  <code class='escaped'>(:if ! equal {=$Group} {&gt;$Group}:)</code> deprecated in favour of  <code class='escaped'>(:template last {=$Group}:)</code> Last item in group
</pre><div class='vspace'></div><h2>Combining conditions</h2>
<p>Conditions (as previously defined) may be combined into more complex conditional expressions using one of these three equivalent forms:
</p>
<div class='vspace'></div><div class='indent'><pre class='escaped'>
(:if expr EXPRESSION :)
(:if [ EXPRESSION ] :)
(:if ( EXPRESSION ) :)</pre>
</div><p class='vspace'>Conditions are combined into expressions with boolean operators and brackets. In the next table, A and B are either regular conditions or (round-)bracketed sub-expressions of regular conditions:
</p>
<div class='vspace'></div><div  style='margin-left: 2em;' > 
<table border='1' cellpadding='2' cellspacing='0' ><tr ><th  align='center'>Expression</th><th  align='center'>Operator</th><th  align='center'>Result</th></tr>
<tr ><td  align='center'><code class='escaped'>A and B</code></td><td  align='center'>And</td><td >TRUE if both A and B are TRUE.</td></tr>
<tr ><td  align='center'><code class='escaped'>A or B</code></td><td  align='center'>Or</td><td >TRUE if either A or B is TRUE.</td></tr>
<tr ><td  align='center'><code class='escaped'>A xor B</code></td><td  align='center'>Xor</td><td >TRUE if either A or B is TRUE, but not both.</td></tr>
<tr ><td  align='center'><code class='escaped'>! A</code></td><td  align='center'>Not</td><td >TRUE if A is not TRUE.</td></tr>
<tr ><td  align='center'><code class='escaped'>A &amp;&amp; B</code></td><td  align='center'>And</td><td >TRUE if both A and B are TRUE.</td></tr>
<tr ><td  align='center'><code class='escaped'>A || B</code></td><td  align='center'>Or</td><td >TRUE if either A or B is TRUE.</td></tr>
</table></div>
<p class='vspace'>Example
</p><div class='indent'><pre class='escaped'>
(:if [ name SomePage and group SomeGroup ]:)    equivalent to (:if name SomeGroup.SomePage:)</pre>
</div><p class='vspace'>Note:
</p><ul><li>Spaces around operators and brackets are required.
</li><li>No specific feedback is given for syntax errors or unbalanced brackets.
</li><li>Use round brackets (not square) for nested expressions.
</li></ul><p class='vspace'>Thus, the following is a valid way of building an expression that shows the following contents only when the user is either the administrator, or is logged in and the time is later than the given date:
</p>
<div class='vspace'></div><div class='indent'><code class='escaped'>(:if [ auth admin || ( authid &amp;&amp; date 2006-06-01.. ) ] :)</code>
</div><p class='vspace'>Nesting with square brackets will silently fail to work as expected:
</p>
<div class='vspace'></div><div class='indent'><code class='escaped'>(:if [ auth admin || [ authid &amp;&amp; date 2006-06-01 ] ] :) </code>&nbsp;&nbsp;&nbsp;<span  style='color: red;'>NOTE: Doesn't Work!</span>
</div><p class='vspace'>A common use of these complex tests are for expressions like:
</p>
<div class='vspace'></div><div class='indent'><code class='escaped'>(:if expr auth admin || auth attr || auth edit :)</code>
</div><div class='indent'><code class='escaped'>[[Logout -&gt; {$Name}?action=logout]]</code>
</div><div class='indent'><code class='escaped'>(:ifend:)</code>
</div><p class='vspace'>which provides a <em>logout</em> link only when the browser has admin, attr, or edit permissions.
</p>
<p class='vspace'><span class='frame rfloat' style='font-size: smaller; background-color: #ffffcc;'> admins (advanced)</span>
</p><h2>Creating new conditions</h2>
<p>See <a class='urllink' href='http://www.pmwiki.org/wiki/Cookbook/ConditionalMarkupSamples' rel='nofollow'>Cookbook:ConditionalMarkupSamples</a>.
</p>
<p class='vspace'>See also <a class='wikilink' href='/PmWiki/PageVariables#specialreferences'>special references</a> for the use of {*$Variables}.
</p>
<div class='vspace'></div><div class='faq' > <a name='faq' id='faq'></a> 
<p> 
</p></div><div style="clear:right; float:right; font-size:smaller; background-color:#eee;" >
<p><span class='wikitrail'>&lt; <a class='wikilink' href='/PmWiki/InterMap'>InterMap</a> | <a class='wikilink' href='/PmWiki/DocumentationIndex#trailstart#trailend'>Documentation Index</a> | <a class='wikilink' href='/PmWiki/PageVariables'>Page variables</a> &gt;</span> 
</p></div>
<p><a name='trailend' id='trailend'></a>
<br clear='all' />
</p><div  style='background-color: #ffe; border-top: 1px solid black; font-size: .8em;' > 
<p>This page may have <span class='commentout-pmwikiorg'> a more recent version on <a class='urllink' href='http://www.pmwiki.org' rel='nofollow'>pmwiki.org</a>: <a class='urllink' href='http://www.pmwiki.org/wiki/PmWiki/ConditionalMarkup' rel='nofollow'>PmWiki:ConditionalMarkup</a>, and </span> a talk page: <a class='urllink' href='http://www.pmwiki.org/wiki/PmWiki/ConditionalMarkup-Talk' rel='nofollow'>PmWiki:ConditionalMarkup-Talk</a>.
</p></div>
</div>

      </td>
    </tr></table>
<!--PageFooterFmt-->
  <div id='wikifoot'>
    <div class='footinfo'></div>
  </div>
<!--/PageFooterFmt-->
</body>
</html>
