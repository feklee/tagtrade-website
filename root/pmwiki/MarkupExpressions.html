<!DOCTYPE html 
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>TagTrade Wiki | PmWiki / MarkupExpressions browse</title>
  <meta http-equiv="Content-type" content="text/html;charset=iso-8859-1" />
  <meta http-equiv='Content-Style-Type' content='text/css' />
  <link rel='stylesheet' href='/pmwiki/pub/skins/tagtrade/tagtrade.css' type='text/css' />
  <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  .editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style>  <meta name='robots' content='noindex,nofollow' />

</head>
<body>
<!--PageHeaderFmt-->
  <div id='wikilogo'><a href=''><img src='/pmwiki/pub/skins/tagtrade/tagtrade-32.gif'
    alt='TagTrade Wiki' border='0' /></a></div>
  <div id='wikihead'>
  </div>
<!--/PageHeaderFmt-->
  <table id='wikimid' width='100%' cellspacing='0' cellpadding='0'><tr>
<!--PageLeftFmt-->
      <td id='wikileft' valign='top'>
        <p class='sidehead'> <a class='wikilink' href='/Main/HomePage'>Main</a>
</p><ul><li><a class='wikilink' href='/Main/Systems'>Systems</a>
</li><li><a class='wikilink' href='/Main/DiscussionGroups'>Discussion groups</a>
</li><li><a class='wikilink' href='/Main/Jabber'>Jabber group chat</a>
</li><li><a class='wikilink' href='/Main/Irc'>IRC channel</a>
</li><li><a class='wikilink' href='/Main/Events'>Events</a>
</li><li><a class='wikilink' href='/Main/TODO'>To do</a>
</li><li><a class='wikilink' href='/Main/WikiSandbox'>Wiki sandbox</a>
</li></ul><p class='vspace sidehead'> <a class='wikilink' href='/Devel/HomePage'>Devel</a>
</p><ul><li><a class='wikilink' href='/Devel/TODO'>To do</a>
</li><li><a class='wikilink' href='/Devel/BackEnd'>Back end</a>
</li><li><a class='wikilink' href='/Devel/FrontEnd'>Front end</a>
</li><li><a class='wikilink' href='/Devel/AuthoringPages'>Authoring pages</a>
</li></ul><p class='vspace sidehead'> <a class='wikilink' href='/Profiles/HomePage'>Profiles</a>
</p>
<p class='vspace sidehead'> <a class='wikilink' href='/PmWiki/PmWiki'>PmWiki</a>
</p>
<p class='vspace sidehead'> <a class='wikilink' href='/DocArchive/HomePage'>Doc archive</a>
</p>
<p class='vspace sidehead'> <a class='wikilink' href='/Portal/HomePage'>Portal</a>
</p><ul><li><a class='wikilink' href='/Portal/WikiSandbox'>Wiki sandbox</a>
</li></ul>
</td>
<!--/PageLeftFmt-->
      <td id='wikibody' valign='top'>
<!--PageTitleFmt-->
        <div id='wikititle'>
          <div class='pagegroup'><a href='/PmWiki'>PmWiki</a> /</div>
          <h1 class='pagetitle'>MarkupExpressions</h1></div>
<!--PageText-->
<div id='wikitext'>
<p>
<a name='trailstart' id='trailstart'></a> 
</p><div style="clear:right; float:right; font-size:smaller; background-color:#eee;" >
<p><span class='wikitrail'>&lt; <a class='wikilink' href='/PmWiki/PageTextVariables'>Page text variables</a> | <a class='wikilink' href='/PmWiki/DocumentationIndex#trailstart#trailend'>Documentation Index</a> | <a class='wikilink' href='/PmWiki/Forms'>Forms</a> &gt;</span> 
</p></div>
<div style="clear:right;" ><span class='frame rfloat' style='font-size: smaller; background-color: #ffffcc;'>authors (advanced) </span>
</div>
<p class='vspace'>The <code class='escaped'>{(...)}</code> "expression markup" allows for a variety of string and formatting operations to be performed from within markup.  Operations defined by this recipe include <em><a href='#substr'>substr</a></em>, <em><a href='#ftime'>ftime</a></em>, <em><a href='#strlen'>strlen</a></em>, <em><a href='#rand'>rand</a></em>, <em><a href='#to'>toupper / tolower</a></em>, <em><a href='#ucfirst'>ucfirst</a></em>, <em><a href='#ucwords'>ucwords</a></em>, <em><a href='#pagename'>pagename</a></em> and <em><a href='#asspaced'>asspaced</a></em>.
</p>
<p class='vspace'><a name='substr' id='substr'></a>
</p><h2><em>substr</em></h2>
<p>The "substr" expression extracts portions of a string.  The arguments are
</p><ol><li>the string to be processed. Always quote the string to be processed.
</li><li>the initial position of the substring.  Note that the initial position argument is zero-based (i.e., the first character is referenced via a "0").
</li><li>the number of characters to extract
</li></ol><table class='markup horiz' align='center'>
      <tr><td class='markup1' valign='top'><pre> {(substr "PmWiki" 2 3)}
 {(substr "PmWiki" 2)}
 {(substr "PmWiki" 0 1)}
 {(substr "PmWiki" 0 -3)}
 {(substr "PmWiki" -3)}
</pre></td><td 
        class='markup2' valign='top'><pre> Wik
 Wiki
 P
 PmW
 iki
</pre>
</td></tr></table>
<p class='vspace'>To obtain the last n characters of a string use <code class='escaped'>{(substr "string" -n)}</code>
<br clear='all' />
To truncate the last n characters of a string use <code class='escaped'>(substr "string" 0 -n)}</code>
</p>
<p class='vspace'><a name='ftime' id='ftime'></a>
</p><h2><em>ftime</em></h2>
<p>"Ftime" expressions are used for date and time formatting.  The generic form is
</p>
<div class='vspace'></div><div class='indent'><code class='escaped'>{(ftime "fmt" "when")}</code>
</div><div class='indent'><code class='escaped'>{(ftime fmt="fmt" when="when")}</code>
</div><p class='vspace'>where <em>fmt</em> is a formatting string and <em>when</em> is the time to be formatted.  The arguments can be in either order and may use the optional "fmt=" and "when=" labels.
</p>
<p class='vspace'>Examples:
</p><table class='markup horiz' align='center'>
      <tr><td class='markup1' valign='top'><pre> {(ftime)}
 {(ftime fmt="%F %H:%M")}
 {(ftime %Y)}
 {(ftime fmt=%T)}
 {(ftime when=tomorrow)}
 {(ftime fmt="%Y-%m-%d" yesterday)}
 {(ftime week %F)}
 {(ftime fmt=%D month)}
 {(ftime fmt="%a%e %b" when="next
week")}
</pre></td><td 
        class='markup2' valign='top'><pre> 2009-Nov-14 at 07:58
 2009-11-14 07:58
 2009
 07:58:21
 2009-Nov-15 at 00:00
 2009-11-13
 1970-01-01
 01/01/70
 Sat21 Nov
</pre>
</td></tr></table>
<p class='vspace'>The <em>fmt</em> parameter is whatever is given by "fmt=", the first parameter containing a '%', or else the site's default. The formatting codes are described at  <a target='_blank'  class='urllink' href='http://php.net/strftime' rel='nofollow'>http://php.net/strftime</a>. In addition to those, '<span class='F produces ISO-8601 dates and'>s' produces Unix timestamps.</span>
Some common formatting strings:
</p>
<div class='vspace'></div><pre>     %F                # ISO-8601 dates      "2009-11-14"
     %s                # Unix timestamp      "1258185501"
     %H:%M:%S          # time as hh:mm:ss    "07:58:21"
     %m/%d/%Y          # date as mm/dd/yyyy  "11/14/2009"
     "%A, %B %d, %Y"   # in words            "Saturday, November 14, 2009"
</pre><p class='vspace'>The <em>when</em> parameter understands many different date formats.  The when parameter is whatever is given by "when=", or whatever parameter remains after determining the format parameter.  Some examples:
</p>
<div class='vspace'></div><pre>    2007-04-11            # ISO-8601 dates
    20070411              # dates without hyphens, slashes, or dots
    2007-03               # months
    @1176304315           # Unix timestamps (seconds since 1-Jan-1970 00:00 UTC)
    now                   # the current time
    today                 # today @ 00:00:00
    yesterday             # yesterday @ 00:00:00
    "next Monday"         # relative dates
    "last Thursday"       # relative dates
    "-3 days"             # three days ago
    "+2 weeks"            # two weeks from now
</pre><p class='vspace'><strong>Note:</strong> If you want to convert a Unix timestamp you <strong>must</strong> prefix with the @. Thus, <code class='escaped'>"{(ftime "%A, %B %d, %Y" @1231116927)}"</code>.
</p>
<p class='vspace'>The <em>when</em> parameter uses PHP's <a target='_blank'  class='urllink' href='http://www.php.net/strtotime' rel='nofollow'>strtotime</a> function to convert date strings according to the GNU <a target='_blank'  class='urllink' href='http://www.gnu.org/software/tar/manual/html_node/Date-input-formats.html' rel='nofollow'>date input formats</a>; as of this writing it only understands English phrases in date specifications.
</p>
<p class='vspace'>The variable <a class='varlink' href='/PmWiki/BasicVariables#FTimeFmt'><code class='varlink'>&#36;FTimeFmt</code></a> can be used to override the default date format used by the "ftime" function.  The default <a class='varlink' href='/PmWiki/BasicVariables#FTimeFmt'><code class='varlink'>&#36;FTimeFmt</code></a> is <a class='varlink' href='/PmWiki/BasicVariables#TimeFmt'><code class='varlink'>&#36;TimeFmt</code></a>.
</p>
<p class='vspace'><a name='strlen' id='strlen'></a>
</p><h2><em>strlen</em></h2>
<p>The "strlen" expression returns the length of a string.  The first argument is the string to be measured.
</p>
<div class='vspace'></div><table class='markup horiz' align='center'>
      <tr><td class='markup1' valign='top'><pre> {(strlen "{$:Summary}")}
</pre></td><td 
        class='markup2' valign='top'><pre> 32
</pre>
</td></tr></table>
<p class='vspace'><a name='rand' id='rand'></a>
</p><h2><em>rand</em></h2>
<p>The "rand" expression returns a random integer.  The first argument is the minimum number to be returned and the second argument is the maximum number to be returned.  If called without the optional min, max arguments rand() returns a pseudo-random integer between 0 and RAND_MAX. If you want a random number between 5 and 15 (inclusive), for example, use rand (5, 15).
</p>
<div class='vspace'></div><table class='markup horiz' align='center'>
      <tr><td class='markup1' valign='top'><pre> {(rand)}
</pre></td><td 
        class='markup2' valign='top'><pre> 525282580
</pre>
</td></tr></table>
<p class='vspace'><a name='to' id='to'></a>
</p><h2><em>toupper</em> / <em>tolower</em></h2>
<p>The "toupper" and "tolower" expressions convert a string into uppercase or lowercase.  The first argument is the string to be processed.
</p>
<div class='vspace'></div><table class='markup horiz' align='center'>
      <tr><td class='markup1' valign='top'><pre> {(toupper "{$:Summary}")}
 {(tolower "{$:Summary}")}
</pre></td><td 
        class='markup2' valign='top'><pre> STRING AND FORMATTING OPERATIONS
 string and formatting operations
</pre>
</td></tr></table>
<p class='vspace'><a name='ucfirst' id='ucfirst'></a>
</p><h2><em>ucfirst</em></h2>
<p>The "ucfirst" expression converts the first character of a string to uppercase.  The first argument is the string to be processed.
</p>
<div class='vspace'></div><table class='markup horiz' align='center'>
      <tr><td class='markup1' valign='top'><pre> {(ucfirst "{$:Summary}")}
</pre></td><td 
        class='markup2' valign='top'><pre> String and formatting operations
</pre>
</td></tr></table>
<p class='vspace'><a name='ucwords' id='ucwords'></a>
</p><h2><em>ucwords</em></h2>
<p>The "ucwords" expression converts the first character of each word in a string to uppercase.  The first argument is the string to be processed.
</p>
<div class='vspace'></div><table class='markup horiz' align='center'>
      <tr><td class='markup1' valign='top'><pre> {(ucwords "{$:Summary}")}
</pre></td><td 
        class='markup2' valign='top'><pre> String And Formatting Operations
</pre>
</td></tr></table>
<p class='vspace'><a name='pagename' id='pagename'></a>
</p><h2><em>pagename</em></h2>
<p>The "pagename" expression builds a pagename from a string.  The first argument is the string to be processed.
</p>
<div class='vspace'></div><table class='markup horiz' align='center'>
      <tr><td class='markup1' valign='top'><pre> {(pagename "{$:Summary}")}
</pre></td><td 
        class='markup2' valign='top'><pre> PmWiki.StringAndFormattingOperations
</pre>
</td></tr></table>
<p class='vspace'><a name='asspaced' id='asspaced'></a>
</p><h2><em>asspaced</em></h2>
<p>The "asspaced" expression formats wikiwords.  The first argument is the string to be processed.
</p>
<div class='vspace'></div><table class='markup horiz' align='center'>
      <tr><td class='markup1' valign='top'><pre> {(asspaced "{$FullName}")}
</pre></td><td 
        class='markup2' valign='top'><pre> Pm Wiki.Markup Expressions
</pre>
</td></tr></table>
<p class='vspace'><a name='nesting' id='nesting'></a>
</p><h2>Nesting expressions</h2>
<p>Markup expressions can be nested:
</p>
<div class='vspace'></div><table class='markup horiz' align='center'>
      <tr><td class='markup1' valign='top'><pre> {(tolower (substr "Hello World" 2))}
</pre></td><td 
        class='markup2' valign='top'><pre> llo world
</pre>
</td></tr></table>
<p class='vspace'><a name='notes' id='notes'></a>    
</p><h2>Notes</h2>
<ul><li>Some of the string-processing markups may not work properly on UTF-8 characters or escaped sequences.
</li><li>The ftime markup does not work with some <a class='urllink' href='http://mcs.vuw.ac.nz/technical/software/SGML/doc/iso8601/ISO8601.html' rel='nofollow'>ISO 8601</a> dates (because a time of 24:00 <a class='urllink' href='http://gnu.org/software/tar/manual/html_node/tar_114.html' rel='nofollow'>is invalid</a>)such as: 
</li></ul><table class='markup horiz' align='center'>
      <tr><td class='markup1' valign='top'><pre> {(ftime fmt="%m/%d/%Y @ %H:%M:%S"
when="20070626T2400")}
 {(ftime fmt="%H:%M:%S"
when="20070626T2400")}
</pre></td><td 
        class='markup2' valign='top'><pre> 06/27/2007 @ 00:00:00
 00:00:00
</pre>
</td></tr></table>
<ul><li>is it possible to display the time in another <a class='urllink' href='http://gnu.org/software/tar/manual/html_node/tar_122.html#SEC122' rel='nofollow'>time zone</a>, eg
</li></ul><table class='markup horiz' align='center'>
      <tr><td class='markup1' valign='top'><pre>NowTime: {(ftime fmt="%F %H:%M")}
 {(ftime when='TZ=:Europe/London" ')}
 {(ftime when='TZ=Europe/London" 0
days')}
 {(ftime when="TZ='Europe/London'
2004-10-31 08:00")}
 {(ftime when='TZ="Pacific/Auckland"
{$:NowTime}')}
</pre></td><td 
        class='markup2' valign='top'><p>NowTime: 2009-11-14 07:58
</p><pre> 1970-Jan-01 at 00:00
 1970-Jan-01 at 00:00
 2004-Oct-31 at 00:00
 (ftime when='TZ=Pacific/Auckland {2009-11-14 07:58')}
</pre>
</td></tr></table>
<div class='vspace'></div><h2>See also</h2>
<ul><li><a class='wikilink' href='/PmWiki/PageVariables'>Page variables</a>, <a class='wikilink' href='/PmWiki/PageTextVariables'>Page text variables</a>
</li><li><a class='wikilink' href='/PmWiki/ConditionalMarkup'>Conditional markup</a>
</li><li><a class='urllink' href='http://www.pmwiki.org/wiki/Cookbook/MarkupExpressionSamples' rel='nofollow'>Cookbook:MarkupExpressionSamples</a> &mdash; <small>custom markup expression samples</small>
</li><li><a class='urllink' href='http://www.pmwiki.org/wiki/Cookbook/MarkupExprPlus' rel='nofollow'>Cookbook:MarkupExprPlus</a>
</li></ul><p> 
</p><div style="clear:right; float:right; font-size:smaller; background-color:#eee;" >
<p><span class='wikitrail'>&lt; <a class='wikilink' href='/PmWiki/PageTextVariables'>Page text variables</a> | <a class='wikilink' href='/PmWiki/DocumentationIndex#trailstart#trailend'>Documentation Index</a> | <a class='wikilink' href='/PmWiki/Forms'>Forms</a> &gt;</span> 
</p></div>
<p><a name='trailend' id='trailend'></a>
<br clear='all' />
</p><div  style='background-color: #ffe; border-top: 1px solid black; font-size: .8em;' > 
<p>This page may have <span class='commentout-pmwikiorg'> a more recent version on <a class='urllink' href='http://www.pmwiki.org' rel='nofollow'>pmwiki.org</a>: <a class='urllink' href='http://www.pmwiki.org/wiki/PmWiki/MarkupExpressions' rel='nofollow'>PmWiki:MarkupExpressions</a>, and </span> a talk page: <a class='urllink' href='http://www.pmwiki.org/wiki/PmWiki/MarkupExpressions-Talk' rel='nofollow'>PmWiki:MarkupExpressions-Talk</a>.
</p></div>
</div>

      </td>
    </tr></table>
<!--PageFooterFmt-->
  <div id='wikifoot'>
    <div class='footinfo'></div>
  </div>
<!--/PageFooterFmt-->
</body>
</html>
